{"version":3,"sources":["../../src/pages/profile/profile.module.ts","../../src/components/components.module.ts","../../src/components/post-attachment/post-attachment.ts","../../src/components/user-avatar/user-avatar.ts","../../src/pages/profile/profile.ts"],"names":[],"mappings":"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","file":"8.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { ProfilePage } from './profile';\nimport { ComponentsModule } from '../../components/components.module';\n\n@NgModule({\n  declarations: [\n    ProfilePage\n  ],\n  imports: [\n    ComponentsModule,\n    IonicPageModule.forChild(ProfilePage),\n  ],\n})\nexport class ProfilePageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/profile/profile.module.ts","import { NgModule } from '@angular/core';\nimport { IonicModule } from 'ionic-angular';\nimport { PostAttachmentComponent } from './post-attachment/post-attachment';\nimport { UserAvatarComponent } from './user-avatar/user-avatar';\n\nconst __components__: any[] = [\n\tPostAttachmentComponent,\n\tUserAvatarComponent\n];\n@NgModule({\n\tdeclarations: [...__components__],\n\timports: [IonicModule],\n\tentryComponents: [...__components__],\n\texports: [...__components__]\n})\nexport class ComponentsModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/components.module.ts","import { Component, Input } from '@angular/core';\n\n@Component({\n  selector: 'post-attachment',\n  templateUrl: 'post-attachment.html'\n})\nexport class PostAttachmentComponent {\n  @Input() type: string;// Can be 'image' - 'url'\n  @Input() image: string;\n\n  constructor() {\n\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/post-attachment/post-attachment.ts","import { Component, Input } from '@angular/core';\n\n\n@Component({\n  selector: 'user-avatar',\n  templateUrl: 'user-avatar.html'\n})\nexport class UserAvatarComponent {\n  @Input() sizeClass: string = 'thumb';// Can be 'thumb-xs'-'thumb-sm'-'thumb-md'-'thumb-lg'\n  @Input() source: string = 'assets/icon/login-logo.png';\n  /* images: any[] = [\n    'adam.png',\n    'ben.png',\n    'hieu.png',\n    'max.png',\n    'mike.png',\n    'perry.png'\n  ]; */\n  imageUrl: string;\n\n  constructor() {\n    //let randomIndex = Math.floor(Math.random() * (this.images.length - 1));\n    //this.source = `assets/img/${this.images[randomIndex]}`;\n\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/user-avatar/user-avatar.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, ActionSheetController } from 'ionic-angular';\nimport { Camera, CameraOptions } from '@ionic-native/camera';\nimport { SharedServices } from '../../app.services/library/shared.services';\nimport { Store } from '../../app.services/store/data.store';\nimport { AuthenticationService } from '../../app.services/http/authentication/auth.service';\nimport { UpdateService } from '../../app.services/http/crud/update.services';\n\n@IonicPage()\n@Component({\n  selector: 'page-profile',\n  templateUrl: 'profile.html',\n})\nexport class ProfilePage {\n\n  public user: any;\n  private _base64Image: any;\n  public avatar: string;\n  private renderProfile: boolean = false;\n  constructor(public navCtrl: NavController, public navParams: NavParams, private us: UpdateService,\n    private actionSheetCtrl: ActionSheetController, private ss: SharedServices, private camera: Camera,\n    private store: Store, private auth: AuthenticationService) {\n\n  }\n\n  ionViewDidLoad() {\n  }\n\n  ionViewWillEnter() {\n\n    if (this.auth.isAuthenticated()) {\n      this.dataInit();\n    } else {\n      this.navCtrl.setRoot('LoginPage');\n    }\n\n  }\n\n  dataInit() {\n    this.store.GET_USER().then(data => {\n      this.user = data;\n      this.avatar = this.user.personal.avatar;\n      setTimeout(() => {\n        this.renderProfile = true;\n      }, 1000);\n    });\n\n  }\n\n\n  dataFactory(data): string {\n    if (data === null || data === undefined || data === '')\n      return 'N/A';\n    return data;\n  }\n\n\n  profilePic() {\n    let actionSheet = this.actionSheetCtrl.create({\n      title: 'Choose your image',\n      buttons: [\n        {\n          text: 'Gallery',\n          handler: () => {\n            this.openCamera(0);\n          }\n        }, {\n          text: 'Camera',\n          handler: () => {\n            this.openCamera(1);\n          }\n        }, {\n          text: 'Cancel',\n          role: 'cancel',\n          handler: () => { }\n        }\n      ]\n    });\n    actionSheet.present();\n  }\n\n\n  private openCamera(sourceType) {\n\n    const options: CameraOptions = {\n      quality: 100,\n      sourceType: sourceType,\n      destinationType: this.camera.DestinationType.DATA_URL,\n      encodingType: this.camera.EncodingType.JPEG,\n      mediaType: this.camera.MediaType.PICTURE,\n      targetWidth: 500,\n      targetHeight: 500,\n      saveToPhotoAlbum: true,\n      correctOrientation: true\n    }\n\n    this.camera.getPicture(options).then((imageData) => {\n      this._base64Image = 'data:image/jpg;base64,' + imageData;\n      this.updateAvatar();\n    }, (err) => {\n      this.ss.toast('Unable to access your image data', 2000);\n    });\n\n  }\n\n  updateAvatar() {\n    this.ss.presentLoading();\n    if (this._base64Image) {\n      let payload = {\n        id: this.user._id,\n        profileimage: this._base64Image\n      };\n      this.us.updateUserAvatar(payload).subscribe(data => {\n        if (data.success) {\n          this.user = data.result;\n          this.avatar = this.user.personal.avatar;\n          this.store.UPDATE_USER(data.result);\n          this.ss.toast('Profile picture updated succesfully', 2000);\n          this.ss.dismissLoading();\n        }\n        else {\n          this.ss.dismissLoading();\n          this.ss.toast('Server error. Unable to update your profile picture. Try again.', 2000);\n        }\n      }, err => {\n        this.ss.dismissLoading();\n        this.ss.toast('Server error. Unable to update your profile picture. Try again.', 2000);\n      });\n    } else {\n      this.ss.dismissLoading();\n      this.ss.toast('Please provide profile image', 2000);\n    }\n  }\n\n  openChangePassword() {\n    this.navCtrl.push('SecurityPage');\n  }\n\n  logOut() {\n    this.auth.logout().then(response => {\n      if (response) {\n        this.navCtrl.parent.parent.setRoot('LoginPage');\n      }\n    });\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/profile/profile.ts"],"sourceRoot":""}