{"version":3,"sources":["../../src/pages/login/login.module.ts","../../src/pages/login/login.ts"],"names":[],"mappings":"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","file":"26.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { LoginPage } from './login';\n\n@NgModule({\n  declarations: [\n    LoginPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(LoginPage),\n  ],\n})\nexport class LoginPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.module.ts","import { Component } from '@angular/core';\nimport { App, IonicPage, NavController, NavParams } from 'ionic-angular';\nimport { SharedServices } from '../../app.services/library/shared.services';\nimport { AuthenticationService } from '../../app.services/http/authentication/auth.service';\nimport { Device } from '@ionic-native/device';\nimport { OneSignal } from '@ionic-native/onesignal';\n\n@IonicPage()\n@Component({\n  selector: 'page-login',\n  templateUrl: 'login.html',\n})\nexport class LoginPage {\n\n  public loading: boolean;\n  public loginText: string;\n  private remembrance: boolean;\n  private main_page: { component: any };\n  public login: any = {\n    email: '',\n    password: '',\n    device: {},\n    oneId: ''\n  };\n\n  constructor(public app: App, public navCtrl: NavController,\n    private ss: SharedServices, private as: AuthenticationService,\n    public navParams: NavParams, private device: Device,\n    private oneSignal: OneSignal) {\n    this.loginText = \"SIGN IN\";\n    this.loading = false;\n    this.main_page = { component: 'TabsPage' };\n  }\n\n  ionViewDidLoad() {\n    this.getDeviceSpecification().then((response) => {\n      this.getOneSignalPlayerId().then(res => {\n        this.remembranceInit();\n      });\n    });\n  }\n\n  getDeviceSpecification() {\n    return new Promise(resolve => {\n      this.login.device = {\n        is_available: true,\n        is_active: true,\n        specification: {\n          uuid: this.device.uuid,\n          model: this.device.model,\n          platform: this.device.platform,\n          version: this.device.version,\n          manufacturer: this.device.manufacturer,\n          is_virtual: this.device.isVirtual,\n          hardware_serial: this.device.serial\n        }\n      }\n      resolve(true)\n    })\n  }\n\n  getOneSignalPlayerId() {\n    return new Promise(resolve => {\n      this.oneSignal.getIds().then(data => {\n        this.login.oneId = data.userId;\n        resolve(true);\n      });\n    });\n  }\n\n  remembranceInit() {\n    let _remembrance: string = localStorage.getItem('__remembrance__') || '';\n    _remembrance === 'true' ? this.remembrance = true : this.remembrance = false;\n\n    if (this.remembrance) {\n      this.login.email = localStorage.getItem('__email__');\n      this.login.password = localStorage.getItem('__password__');\n      this.ss.presentLoading();\n      this.validateLogin(this.login);\n    }\n\n  }\n\n  doLogin() {\n    this.loading = true;\n    this.ss.presentLoading();\n    this.getDeviceSpecification().then(response => {\n      this.getOneSignalPlayerId().then(res => {\n        this.validateLogin(this.login);\n      });\n    });\n  }\n\n\n  validateLogin(login) {\n    if (!login.email || !login.password) {\n      this.empty();\n    } else {\n      this.as.authenticate(login).then(res => {\n        this.ss.swalAlert('Returned',JSON.stringify(res),'info');\n        if (res['success']) {\n          this.success(login);\n        } else {\n          this.fail();\n        }\n      }).catch(err => {\n        this.error()\n      });\n    }\n  }\n\n\n  checkRemembrance(login) {\n    if (this.remembrance) {\n      localStorage.setItem('__remembrance__', 'true');\n      localStorage.setItem('__email__', login.email);\n      localStorage.setItem('__password__', login.password);\n    } else {\n      localStorage.removeItem('__email__');\n      localStorage.removeItem('__password__');\n    }\n  }\n\n  success(login) {\n    this.checkRemembrance(login);\n    this.ss.dismissLoading();\n    this.navCtrl.setRoot(this.main_page.component);\n  }\n\n  empty() {\n    this.ss.dismissLoading();\n    this.loginText = 'SIGN IN';\n    this.loading = false;\n  }\n\n  fail() {\n    this.ss.dismissLoading();\n    this.loginText = 'SIGN IN';\n    this.loading = false;\n    this.ss.toast(\"Invalid credentials. Please try again.\", 2000);\n  }\n\n  error() {\n    this.ss.dismissLoading();\n    this.loginText = 'SIGN IN';\n    this.loading = false;\n    this.ss.toast('Network Error. Please try again', 2000);\n  }\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.ts"],"sourceRoot":""}