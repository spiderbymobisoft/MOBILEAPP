{"version":3,"sources":["../../src/pages/select-street/select-street.module.ts","../../src/pages/select-street/select-street.ts"],"names":[],"mappings":"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","file":"16.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { SelectStreetPage } from './select-street';\n\n@NgModule({\n  declarations: [\n    SelectStreetPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(SelectStreetPage),\n  ],\n})\nexport class SelectStreetPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/select-street/select-street.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\nimport { RetrieveService } from '../../app.services/http/crud/retrieve.services';\nimport { Store } from '../../app.services/store/data.store';\nimport { SharedServices } from '../../app.services/library/shared.services';\n\n@IonicPage()\n@Component({\n  selector: 'page-select-street',\n  templateUrl: 'select-street.html',\n})\nexport class SelectStreetPage {\n\n  public streetRecords: any[] = [];\n  public user: any;\n  public isBlankPost: number = 0;\n  public searchText: string = '';\n  private networkErrorText: string = '';\n  private start: number = 0;\n\n  constructor(public navCtrl: NavController, public navParams: NavParams,\n    private rs: RetrieveService, private store: Store, private ss: SharedServices) {\n  }\n\n  ionViewDidLoad() {\n  }\n\n  ionViewWillEnter() {\n    this.dataInit();\n  }\n\n  dataInit() {\n    this.user = this.store.GET_USER();\n    setTimeout(() => {\n      this.loadContent();\n    }, 500);\n  }\n\n  loadContent() {\n    this.getStreetRecords().then(res => {\n      if (!res) {\n        this.isBlankPost = 1;\n        setTimeout(() => {\n          this.networkErrorText = '';\n        }, 3100);\n      }\n    });\n  }\n\n  search() {\n    if(this.searchText === ''){\n      this.ss.toast('Please enter street name to search', 2000);\n    }else{\n      this.ss.presentLoading();\n      this.start = 0;\n      this.streetRecords = [];\n      this.searchStreetRecords().then(res => {\n        this.ss.dismissLoading();\n        if (!res) {\n          this.isBlankPost = 1;\n          setTimeout(() => {\n            this.networkErrorText = '';\n          }, 3100);\n        }\n      });\n    }\n  }\n\n  searchStreetRecords() {\n    return new Promise(resolve => {\n      this.rs.searchStreetRecords(this.searchText,this.start).subscribe(data => {\n        let _data = data;\n        if (_data.result.length > 0) {\n          this.streetRecords = [...this.streetRecords, ..._data.result];\n          this.isBlankPost = 1;\n          resolve(true);\n        } else {\n          this.isBlankPost = 1\n          resolve(false);\n        }\n      }, err => {\n        this.networkErrorText = 'Network Error. Check your internet connection and try again';\n        this.streetRecords ? this.isBlankPost = 0 : this.isBlankPost = 1;\n        resolve(false);\n      });\n    }).catch((err) => {\n      this.streetRecords.length > 0 ? this.isBlankPost = 0 : this.isBlankPost = 1;\n      this.ss.toast('Unable to perform this operation. Please try again', 2000);\n    });\n  }\n\n\n  getStreetRecords() {\n    return new Promise(resolve => {\n      this.start = 0;\n      this.rs.getStreetRecordsByUser(this.user._id).subscribe(data => {\n        let _data = data;\n        if (_data.result.length > 0) {\n          this.streetRecords = _data.result;\n          this.isBlankPost = 1;\n          resolve(true);\n        } else {\n          this.isBlankPost = 1\n          resolve(false);\n        }\n      }, err => {\n        this.networkErrorText = 'Network Error. Check your internet connection and try again';\n        this.streetRecords ? this.isBlankPost = 0 : this.isBlankPost = 1;\n        resolve(false);\n      });\n    }).catch((err) => {\n      this.streetRecords.length > 0 ? this.isBlankPost = 0 : this.isBlankPost = 1;\n      this.ss.toast('Unable to perform this operation. Please try again', 2000);\n    });\n  }\n\n\n  doInfinite(infiniteScroll: any) {\n    this.start += 50;\n    this.searchStreetRecords().then(() => {\n      infiniteScroll.complete();\n    }).catch(err => {\n      this.ss.toast('No network connection...', 2000);\n    });\n  }\n\n  openNewPropertyPage(streetRecord){\n    let payload: any = {\n      street_id: streetRecord.street.street_id,\n      street_name: streetRecord.street.street_name,\n      lga: streetRecord.street.lga,\n      state: streetRecord.street.state,\n      country: streetRecord.street.country\n    };\n    this.navCtrl.push('NewPropertyPage', {data: payload})\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/select-street/select-street.ts"],"sourceRoot":""}